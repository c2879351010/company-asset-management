<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.backend.dao.LoginLogsDao">

    <resultMap type="com.example.backend.entity.LoginLogs" id="LoginLogsMap">
        <result property="logId" column="LOG_ID" jdbcType="VARCHAR"/>
        <result property="userId" column="USER_ID" jdbcType="VARCHAR"/>
        <result property="operationType" column="OPERATION_TYPE" jdbcType="VARCHAR"/>
        <result property="ipAddress" column="IP_ADDRESS" jdbcType="VARCHAR"/>
        <result property="userAgent" column="USER_AGENT" jdbcType="VARCHAR"/>
        <result property="details" column="DETAILS" jdbcType="VARCHAR"/>
        <result property="sessionId" column="SESSION_ID" jdbcType="VARCHAR"/>
        <result property="loginEmail" column="LOGIN_EMAIL" jdbcType="VARCHAR"/>
        <result property="operationTime" column="OPERATION_TIME" jdbcType="VARCHAR"/>
        <result property="operationResult" column="OPERATION_RESULT" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 批量插入 -->
    <insert id="insertBatch" keyProperty="" useGeneratedKeys="true">
        insert into C##TEST.LOGIN_LOGS(LOG_ID, USER_ID, OPERATION_TYPE, IP_ADDRESS, USER_AGENT, DETAILS, SESSION_ID, LOGIN_EMAIL, OPERATION_TIME, OPERATION_RESULT)
        values
        <foreach collection="entities" item="entity" separator=",">
        (#{entity.logId}, #{entity.userId}, #{entity.operationType}, #{entity.ipAddress}, #{entity.userAgent}, #{entity.details}, #{entity.sessionId}, #{entity.loginEmail}, #{entity.operationTime}, #{entity.operationResult})
        </foreach>
    </insert>
    <!-- 批量插入或按主键更新 -->
    <insert id="insertOrUpdateBatch" keyProperty="" useGeneratedKeys="true">
        insert into C##TEST.LOGIN_LOGS(LOG_ID, USER_ID, OPERATION_TYPE, IP_ADDRESS, USER_AGENT, DETAILS, SESSION_ID, LOGIN_EMAIL, OPERATION_TIME, OPERATION_RESULT)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.logId}, #{entity.userId}, #{entity.operationType}, #{entity.ipAddress}, #{entity.userAgent}, #{entity.details}, #{entity.sessionId}, #{entity.loginEmail}, #{entity.operationTime}, #{entity.operationResult})
        </foreach>
        on duplicate key update
LOG_ID = values(LOG_ID) , USER_ID = values(USER_ID) , OPERATION_TYPE = values(OPERATION_TYPE) , IP_ADDRESS = values(IP_ADDRESS) , USER_AGENT = values(USER_AGENT) , DETAILS = values(DETAILS) , SESSION_ID = values(SESSION_ID) , LOGIN_EMAIL = values(LOGIN_EMAIL) , OPERATION_TIME = values(OPERATION_TIME) , OPERATION_RESULT = values(OPERATION_RESULT)     </insert>

</mapper>

